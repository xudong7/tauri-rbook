document.onreadystatechange=function(){if("interactive"==document.readyState){var n=function(){for(var f=document.querySelectorAll("note"),d={i:0};d.i<f.length;d={h:d.h,i:d.i},d.i++){var k=f[d.i].querySelectorAll("sup");d.h=f[d.i].querySelectorAll("aside");for(var c={g:0};c.g<k.length;c={g:c.g,l:c.l,j:c.j},c.g++){var l=k[c.g].querySelector("a");c.j=k[c.g].querySelector("img");if(l.href.match("#"+d.h[c.g].id)){c.l=function(b,a){return function(){b.h[a.g].style.zIndex="-1"}}(d,c);var t=function(b,a){return function(){b.h[a.g].style.webkitAnimation="fade 0.3s 1 forwards";b.h[a.g].style.animation="fade 0.3s 1 forwards";b.h[a.g].addEventListener("webkitAnimationend",a.l);b.h[a.g].addEventListener("animationend",a.l)}}(d,c),y=function(b,a){return function(){b.h[a.g].removeEventListener("webkitAnimationend",a.l);b.h[a.g].removeEventListener("animationend",a.l);b.h[a.g].removeAttribute("style");b.h[a.g].removeAttribute("class");var h="",e=document.body.clientWidth||document.documentElement.clientWidth,A=window.innerHeight,m=a.j.offsetWidth,B=a.j.offsetHeight,u=f[b.i].offsetWidth,p=a.j.offsetLeft,v=a.j.offsetTop,w=u-p,C=f[b.i].offsetHeight-v,r=m/2+p,x=a.j.getBoundingClientRect().top;e>=2*u&&(e/=2,r>e&&(r-=e));e=100*r/e;80<e?(b.h[a.g].style.left="unset",b.h[a.g].style.right=w-m/2+1+"px",h+="zuo-out"):50<e?(b.h[a.g].style.left="unset",b.h[a.g].style.right=w-m/2-51+"px",h+="zuo"):20<e?(b.h[a.g].style.left=p+m/2-51+"px",h+="you"):(b.h[a.g].style.left=p+m/2+1+"px",h+="you-out");x<=b.h[a.g].offsetHeight+10&&x<A/2?(b.h[a.g].style.top=v+B+10+"px",h+="-xia"):(b.h[a.g].style.top="unset",b.h[a.g].style.bottom=C+10+"px",h+="-shang");b.h[a.g].classList.add(h);b.h[a.g].style.zIndex="1";b.h[a.g].style.webkitAnimation="show 0.3s 1 forwards";b.h[a.g].style.animation="show 0.3s 1 forwards"}}(d,c);f[d.i].classList.add("change");l.removeAttribute("href");d.h[c.g].querySelector("a").removeAttribute("href");navigator.userAgent.match(z)?(l.onmouseover=y,l.onmouseout=t):(l.ontouchstart=y,l.ontouchend=t)}}}},z=RegExp(/windows|x11|mac/i);navigator.userAgent.match(RegExp(/ibooks|\u56fe\u4e66|\u5716\u66f8|\u56f3\u66f8/i))||(window.onload=n,window.onresize=n);if(navigator.userAgent.match(z)){var q=document.body;q.bgColor&&(q.onload=function(){q.parentNode.style.backgroundColor=q.bgColor})}else if(1==document.images.length){n=function(){if(g.parentNode.classList.contains("kuchie")){var f=window.innerWidth,d=window.innerHeight,k=g.width,c=g.height;k>c&&c/k>f/d?g.classList.contains("change")||g.classList.add("change"):g.classList.contains("change")&&g.classList.remove("change")}};var g=document.querySelector("img");g.onload=n;window.onresize=n}}};